<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Management</title>
    
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <style>
        /* 1. Sidebar Blue (Same as before) */
        .sidebar-blue {
            background-color: #009be5 !important;
            color: white !important;
        }

        /* 2. Table Grid Styling */
        .grid-table {
            border-collapse: collapse;
            width: 100%;
        }
        .grid-table th, .grid-table td {
            border: 1px solid #999; /* Grey grid lines */
            padding: 10px;
            text-align: center;
        }
        /* Dark Blue Header for Table */
        .grid-table th {
            background-color: #3f51b5; /* w3-indigo match */
            color: white;
            font-weight: bold;
        }

        /* 3. Form Box Styling */
        .form-box {
            border: 3px solid #888; /* Thicker grey border like image */
            padding: 20px;
            height: 100%; /* Try to match height of table */
        }

        /* Action buttons for edit/delete */
        .action-btn {
            width: 40px;
            height: 40px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border: 1px solid #ccc;
            background: #fff;
        }
        .action-btn.edit i { color: #333; }
        .action-btn.delete i { color: #d9534f; }

        body { display: flex; flex-direction: column; min-height: 100vh; }
        .page-body { flex: 1; }
    </style>
</head>
<body class="w3-white">

    <div class="w3-bar w3-indigo w3-text-white w3-top" style="z-index:4">
        <div class="w3-bar-item w3-large">Python(20420) 10:30 - 12:01 MW</div>
    </div>

    <div class="w3-sidebar w3-bar-block sidebar-blue" style="width:240px; top:43px; z-index:3;">
        <div style="margin-top: 20px;"></div>
        <a href="#" class="w3-bar-item w3-button w3-padding-16 w3-white w3-text-blue">USER MANAGEMENT</a>
        <a href="/studentmngt" class="w3-bar-item w3-button w3-padding-16">STUDENT MANAGEMENT</a>
        <a href="/attendance" class="w3-bar-item w3-button w3-padding-16">VIEW ATTENDANCE</a>
        <a href="/logout" class="w3-bar-item w3-button w3-padding-16">LOGOUT</a>
    </div>

    <div class="page-body" style="margin-left: 240px; margin-top: 43px; padding: 20px;">

        <h4 class="w3-text-black" style="margin-bottom: 20px;">USER MANAGEMENT</h4>

        {% if error %}
        <div class="w3-panel w3-red">
            <p>{{ error }}</p>
        </div>
        {% endif %}

        <div class="w3-row-padding" style="margin: 0 -16px;">
            
            <div class="w3-col m4">
                <div class="form-box">
                    <form method="POST" action="/admin/users">
                        <div class="w3-margin-bottom">
                            <input class="w3-input w3-border" name="name" type="text" placeholder="name" required style="padding: 10px;">
                        </div>

                        <div class="w3-margin-bottom">
                            <input class="w3-input w3-border" name="email" type="email" placeholder="email" required style="padding: 10px;">
                        </div>
                        
                        <div class="w3-margin-bottom">
                            <input class="w3-input w3-border" name="password" type="password" placeholder="password" required style="padding: 10px;">
                        </div>

                        <div class="w3-right-align" style="margin-top: 30px;">
                            <button class="w3-button w3-indigo w3-text-white" style="width: 100px;">ADD</button>
                        </div>
                    </form>
                </div>
            </div>

            <div class="w3-col m8">
                <table class="grid-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>NAME</th>
                            <th>EMAIL</th>
                            <th>PASSWORD</th>
                            <th>ACTION</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for u in users %}
                        <tr style="height: 50px;">
                            <td>{{ u.id }}</td>
                            <td>{{ u.name }}</td>
                            <td>{{ u.email }}</td>
                            <td>••••••</td>
                            <td style="display:flex; align-items:center; justify-content:center; gap:8px; padding:8px 12px;">
                                <a class="action-btn edit" title="Edit" href="/admin/users/{{ u.id }}/edit">
                                    <i class="fa fa-pencil"></i>
                                </a>
                                <form method="POST" action="/admin/users/{{ u.id }}/delete" style="display:inline;">
                                    <button class="action-btn delete" title="Delete">
                                        <i class="fa fa-trash"></i>
                                    </button>
                                </form>
                    
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

        </div>

    </div>

    <div style="margin-left: 240px; text-align: center; margin-top: 20px; padding: 20px;">
        <hr class="w3-border-grey">
        <p class="w3-small w3-text-grey">Jude Khalil Veloso, Rasheed Boriss Yap, 2025</p>
    </div>

</body>
</html>